@model List<MTU.Models.DTOs.PostDto>

@{
    ViewData["Title"] = "Khám phá";
}

<div class="feed-wrapper">
    <div class="explore-header-card">
        <h2>
            <i class="fas fa-compass explore-header-icon"></i> 
            Khám phá
        </h2>
        <p>Tìm kiếm bài viết thú vị từ cộng đồng MTU</p>
    </div>

    <section class="feed-list">
        @if (ViewBag.ErrorMessage != null)
        {
            <div class="feed-card" style="padding: 20px; text-align: center; color: #ef4444; border: 2px solid var(--border-primary);">
                <p>@ViewBag.ErrorMessage</p>
            </div>
        }
        
        @if (Model.Count == 0 && ViewBag.ErrorMessage == null)
        {
            <div class="empty-explore-card">
                <i class="fa-regular fa-compass fa-2x mb-3"></i>
                <p>Chưa có bài viết khám phá nào.</p>
            </div>
        }
        
        @foreach (var post in Model)
        {
            @await Html.PartialAsync("_PostCardPartial", post)
        }
    </section>

    @* Pagination Controls *@
    @if (ViewBag.TotalPages > 1)
    {
        <div class="feed-pagination">
            @if (ViewBag.HasPreviousPage as bool? ?? false)
            {
                <a href="?page=@(ViewBag.CurrentPage - 1)" class="feed-btn">
                    <i class="fa-solid fa-chevron-left"></i> Trước
                </a>
            }
            else
            {
                <button class="feed-btn" disabled>
                    <i class="fa-solid fa-chevron-left"></i> Trước
                </button>
            }
            
            <span class="page-info">
                Trang @(ViewBag.CurrentPage ?? 1)
            </span>
            
            @if (ViewBag.HasNextPage as bool? ?? false)
            {
                <a href="?page=@(ViewBag.CurrentPage + 1)" class="feed-btn">
                    Sau <i class="fa-solid fa-chevron-right"></i>
                </a>
            }
            else
            {
                <button class="feed-btn" disabled>
                    Sau <i class="fa-solid fa-chevron-right"></i>
                </button>
            }
        </div>
    }
</div>

@section Scripts {
    <script src="~/js/interactions.js" asp-append-version="true"></script>
}

@section Styles {
    <link rel="stylesheet" href="~/css/explore.css" asp-append-version="true" />
}
